<h2>Generating your draftsâ€¦</h2>

<div class="spinner"></div>

<script>
  async function checkStatus() {
    const res = await fetch("<%= status_application_path(@application) %>");
    const json = await res.json();

    if (json.cl_status === "done" && json.video_status === "done") {
      window.location.href = "<%= overview_application_path(@application) %>";
    }
  }
  setInterval(checkStatus, 2000);
</script>

<style>
.spinner {
  width:48px;height:48px;border-radius:50%;
  border:4px solid #ddd;border-top-color:#333;
  animation: spin 1s linear infinite;
  margin:20px auto;
}
@keyframes spin { to { transform: rotate(360deg); } }
</style>
