<div class="page-header">
  <h1 class="page-title">Create New Application</h1>
  <h2 class="page-subtitle">
    Upload your CV and the job description to get started with AI-powered application assistance
  </h2>
</div>

<div class="centered-wrapper">
  <%= simple_form_for @application, html: { class: 'application-form', multipart: true, data: { controller: "application-form" } } do |f| %>
    <div class="d-flex justify-content-center align-items-start gap-4" style="width: 1400px; max-width: 100%;">

          <div class="d-flex flex-column" style="flex: 0 0 20%; max-width: 20%;">
            <div class="d-flex flex-column p-4 rounded-4 shadow bg-white border" style="height: 450px;">
              <h2 class="h5 mb-4 text-center"><strong>Tips for best results</strong></h2>
              <div class="flex-grow-1 p-2 overflow-auto">
                <ul class="ps-3">
                  <li class="mb-3">Make sure your CV is up-to-date and includes your most relevant experience</li>
                  <li class="mb-3">Upload the complete job description including requirements and responsibilities</li>
                  <li class="mb-3">Files should be clear and readable for the best AI analysis</li>
                  <li class="mb-3">Include your preferences and customizations</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="d-flex flex-column p-4 rounded-4 shadow bg-white border" style="flex: 0 0 38.25%; max-width: 38.25%; height: 450px;">
            <h2 class="h5 mb-4 text-center"><strong>Your CV</strong></h2>
            <div class="d-flex flex-column flex-grow-1 align-items-center justify-content-center">
              <label class="file-upload w-100 h-100 d-flex flex-column align-items-center justify-content-center">
                <%= f.file_field :cv,
                    accept: '.pdf,.doc,.docx',
                    class: 'hidden-file-input',
                    data: {
                      application_form_target: "fileInput",
                      action: "change->application-form#handleFileChange"
                    } %>
                <div class="upload-icon mb-3" data-application-form-target="uploadIcon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12V4m0 0L8 8m4-4l4 4" />
                  </svg>
                </div>
                <p class="upload-text-main text-center text-truncate" data-application-form-target="filePreview" style="max-width: 100%; overflow: hidden; white-space: nowrap;">
                  Drag and drop your CV here or click to browse
                </p>
                <p class="upload-text-sub text-center">Supports .pdf, .docx, .doc files up to 10MB</p>
              </label>
            </div>
          </div>

          <div class="d-flex flex-column p-4 rounded-4 shadow bg-white border" style="flex: 0 0 38.25%; max-width: 38.25%; height: 450px;">
            <h2 class="h5 mb-4 text-center"><strong>Job Description</strong></h2>
            <div class="d-flex flex-column flex-grow-1">
              <div class="flex-grow-1 d-flex align-items-center justify-content-center">
                <%= f.text_area :job_d,
                    placeholder: "Paste the job description here as plain text...",
                    class: 'job-description-textarea w-100 h-100',
                    style: 'resize: none; outline: none; border-radius: 0.25rem; border: 1px solid #ced4da;',
                    data: {
                      application_form_target: "textInput",
                      action: "input->application-form#handleTextInput change->application-form#handleTextInput"
                    } %>
              </div>
            </div>
          </div>

    </div>

    <div class="d-flex justify-content-center mt-4">
      <%= f.submit "Select Your Preferences â†’",
          id: "nextBtn",
          class: "next-button disabled-state",
          data: {
            application_form_target: "submitBtn",
            action: "click->application-form#validateSubmit"
          } %>
    </div>
  <% end %>
</div>
