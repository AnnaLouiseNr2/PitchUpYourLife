<!-- Share Video Modal -->
<div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true" data-controller="copy-share">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0" style="border-radius: 20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); box-shadow: 0 20px 40px rgba(0,0,0,0.1);">

      <!-- Header with gradient background -->
      <div class="modal-header border-0 pb-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px 20px 0 0; padding: 2rem 2rem 1.5rem 2rem;">
        <div class="text-center w-100">
          <div class="d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; backdrop-filter: blur(10px);">
            <i class="bi bi-share" style="font-size: 1.8rem; color: white;"></i>
          </div>
          <h3 class="modal-title text-white mb-2 fw-bold" id="shareModalLabel">Share Your Video Pitch</h3>
          <p class="text-white mb-0" style="opacity: 0.9; font-size: 0.95rem;">Choose how you'd like to share your professional video pitch</p>
        </div>
        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="opacity: 0.8;"></button>
      </div>

      <div class="modal-body p-4" style="padding: 2rem 2rem 1rem 2rem !important;">
        <!-- Video Link Section -->
        <div class="mb-4">
          <div class="p-4 bg-white border-0 shadow-sm" style="border-radius: 16px;">
            <div class="d-flex align-items-center mb-3">
              <div class="d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
                <i class="bi bi-link-45deg text-white" style="font-size: 1.2rem;"></i>
              </div>
              <h6 class="mb-0 fw-semibold text-dark">Direct Link</h6>
            </div>
            <div class="d-flex gap-2 align-items-center">
              <input type="text" class="form-control flex-grow-1 border-0" id="videoUrl" readonly style="font-size: 0.9rem; background-color: #f8f9fa; padding: 12px 16px; border-radius: 12px; font-family: 'Monaco', 'Menlo', monospace;">
              <button class="btn flex-shrink-0 d-flex align-items-center justify-content-center" type="button" data-action="click->copy-share#copyContent" data-copy-share-content-id-param="videoUrl" title="Copy link" style="width: 44px; height: 44px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; color: white;">
                <i class="bi bi-copy" style="font-size: 1.1rem;"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Share Options Section -->
        <div>
          <div class="d-flex align-items-center mb-3">
            <div class="d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
              <i class="bi bi-broadcast text-white" style="font-size: 1.2rem;"></i>
            </div>
            <h6 class="mb-0 fw-semibold text-dark">Share On Social</h6>
          </div>
          <div class="row g-3">
            <div class="col-6">
              <a href="#" id="emailShare" class="btn w-100 d-flex align-items-center justify-content-center text-decoration-none" target="_blank" style="padding: 16px 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 14px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                <i class="bi bi-envelope me-2" style="font-size: 1.3rem;"></i>
                <span class="fw-semibold">Email</span>
              </a>
            </div>
            <div class="col-6">
              <a href="#" id="whatsappShare" class="btn w-100 d-flex align-items-center justify-content-center text-decoration-none" target="_blank" style="padding: 16px 12px; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: white; border: none; border-radius: 14px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);">
                <i class="bi bi-whatsapp me-2" style="font-size: 1.3rem;"></i>
                <span class="fw-semibold">WhatsApp</span>
              </a>
            </div>
            <div class="col-6">
              <a href="#" id="linkedinShare" class="btn w-100 d-flex align-items-center justify-content-center text-decoration-none" target="_blank" style="padding: 16px 12px; background: linear-gradient(135deg, #0077B5 0%, #005885 100%); color: white; border: none; border-radius: 14px; box-shadow: 0 4px 15px rgba(0, 119, 181, 0.4);">
                <i class="bi bi-linkedin me-2" style="font-size: 1.3rem;"></i>
                <span class="fw-semibold">LinkedIn</span>
              </a>
            </div>
            <div class="col-6">
              <a href="#" id="twitterShare" class="btn w-100 d-flex align-items-center justify-content-center text-decoration-none" target="_blank" style="padding: 16px 12px; background: linear-gradient(135deg, #1DA1F2 0%, #1a91da 100%); color: white; border: none; border-radius: 14px; box-shadow: 0 4px 15px rgba(29, 161, 242, 0.4);">
                <i class="bi bi-twitter me-2" style="font-size: 1.3rem;"></i>
                <span class="fw-semibold">Twitter</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer border-0 d-flex justify-content-center" style="padding: 1rem 2rem 2rem 2rem;">
        <button type="button" class="btn px-5 py-2" data-bs-dismiss="modal" style="background: rgba(108, 117, 125, 0.1); color: #6c757d; border: 1px solid rgba(108, 117, 125, 0.2); border-radius: 12px; font-weight: 500;">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Share Cover Letter Modal -->
<div class="modal fade" id="shareCoverLetterModal" tabindex="-1" aria-labelledby="shareCoverLetterModalLabel" aria-hidden="true" data-controller="copy-share">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0" style="border-radius: 20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); box-shadow: 0 20px 40px rgba(0,0,0,0.1);">

      <!-- Header with gradient background -->
      <div class="modal-header border-0 pb-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px 20px 0 0; padding: 2rem 2rem 1.5rem 2rem;">
        <div class="text-center w-100">
          <div class="d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; backdrop-filter: blur(10px);">
            <i class="bi bi-file-earmark-text" style="font-size: 1.8rem; color: white;"></i>
          </div>
          <h3 class="modal-title text-white mb-2 fw-bold" id="shareCoverLetterModalLabel">Share Your Cover Letter</h3>
          <p class="text-white mb-0" style="opacity: 0.9; font-size: 0.95rem;">Share your professional cover letter with potential employers</p>
        </div>
        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="opacity: 0.8;"></button>
      </div>

      <div class="modal-body p-4" style="padding: 2rem 2rem 1rem 2rem !important;">
        <!-- Cover Letter Text Section -->
        <div class="mb-4">
          <div class="p-4 bg-white border-0 shadow-sm" style="border-radius: 16px;">
            <div class="d-flex align-items-center mb-3">
              <div class="d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
                <i class="bi bi-clipboard-check text-white" style="font-size: 1.2rem;"></i>
              </div>
              <h6 class="mb-0 fw-semibold text-dark">Copy Cover Letter Text</h6>
            </div>
            <div class="d-flex gap-2 align-items-center">
              <textarea class="form-control flex-grow-1 border-0" id="coverLetterText" readonly rows="4" style="font-size: 0.9rem; background-color: #f8f9fa; padding: 12px 16px; border-radius: 12px; resize: none;"><%= (@application.finals.last&.cl || '').gsub(/<[^>]*>/, '') %></textarea>
              <button class="btn flex-shrink-0 d-flex align-items-center justify-content-center" type="button" data-action="click->copy-share#copyContent" data-copy-share-content-id-param="coverLetterText" title="Copy text" style="width: 44px; height: 44px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; color: white;">
                <i class="bi bi-copy" style="font-size: 1.1rem;"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Share Options Section -->
        <div>
          <div class="d-flex align-items-center mb-3">
            <div class="d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
              <i class="bi bi-envelope-paper text-white" style="font-size: 1.2rem;"></i>
            </div>
            <h6 class="mb-0 fw-semibold text-dark">Share Via Email</h6>
          </div>
          <div class="row g-3">
            <div class="col-12">
              <a href="mailto:?subject=Cover Letter for <%= @application.title %>&body=<%= ERB::Util.url_encode((@application.finals.last&.cl || '').gsub(/<[^>]*>/, '')) %>" id="emailCoverLetter" class="btn w-100 d-flex align-items-center justify-content-center text-decoration-none" target="_blank" style="padding: 16px 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 14px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                <i class="bi bi-envelope me-2" style="font-size: 1.3rem;"></i>
                <span class="fw-semibold">Send Cover Letter via Email</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer border-0 d-flex justify-content-center" style="padding: 1rem 2rem 2rem 2rem;">
        <button type="button" class="btn px-5 py-2" data-bs-dismiss="modal" style="background: rgba(108, 117, 125, 0.1); color: #6c757d; border: 1px solid rgba(108, 117, 125, 0.2); border-radius: 12px; font-weight: 500;">Close</button>
      </div>
    </div>
  </div>
</div>
